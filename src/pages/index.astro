---
import Mainlayout from "../layouts/Mainlayout.astro";
import "../style/generalstyle.css";
import Button from "../components/Button.astro";
import Card from "../components/Card.astro";
import Collaborate from "../components/Collaborate.astro";

import ArtistListe from "../components/ArtistListe.astro";
const data = await fetch(
  "https://qqlcqmrveupfwluwoctv.supabase.co/rest/v1/affiliatedCphData",
  {
    method: "GET",
    headers: {
      apikey:
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFxbGNxbXJ2ZXVwZndsdXdvY3R2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc3MzQ3MzQsImV4cCI6MjAyMzMxMDczNH0.18SZnOZc5uAHdiIeonTl5cOenfcDIkL4VOhqSCsTFwM",
    },
  }
).then((res) => res.json());

console.log(data);
---

<Mainlayout>
  <section class="header_karrusel"></section>
  <div>
    <h3>
      AFFILIATED IS A FIERCE BOUTIQUE INDEPENDENT RECORD LABEL, AIMING TO
      CULTUVATE A DIVERSE ROSTER OF UNDISCOVERED AND UPCOMING MUSIC TALENT.
    </h3>
  </div>
  <section class="artist_section">
    <div class="artist_filter_buttons">
      <Button variant="filter_knap">ALL</Button>
      <Button variant="filter_knap">LABEL</Button>
      <Button variant="filter_knap">PUBLISHING</Button>
      <Button variant="filter_knap">MANAGEMENT</Button>
    </div>
    <hr class="underline" />
    <div class="cards_grid"></div>
  </section>
  <section class="artist grid_auto">
    {
      data.map((artist) => {
        return <ArtistListe data={artist} />;
      })
    }
  </section>
  <section class="collaborate">
    <div>
      <h2>OUR COLLABORATORS</h2>
      <p>Samarbejde med Affiliated ... mere tekst f√∏lger...</p>
    </div>
    <div><Collaborate /></div>
  </section>
  <section class="contact">
    <Button variant="primary" id="bookingBtn">BOOKING</Button>
    <Button variant="primary" id="contactBtn">CONTACT</Button>
    <div id="bookingMail" class="mail hidden">booking@affiliatedcph.com</div>
    <div id="contactMail" class="mail hidden">manager@affiliatedcph.com</div>
  </section>
  <img class="frontpage_logo" src="" alt="" />
</Mainlayout>

<style>
  .underline {
    width: 22rem;
    margin: auto;
  }
  .artist_filter_buttons {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
  }
  .mail {
    color: var(--textColor);
    text-decoration: underline;
    margin-top: 1rem;
    font-size: 1.2rem;
  }
  .grid_auto {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(310px, 2fr));
  }
  .hidden {
    display: none;
  }
  .contact {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: 5rem;
    margin: 5rem;
  }
  @media screen and (min-width: 700px) {
    .underline {
      width: 33rem;
      margin: auto;
    }
    .contact {
      gap: 10rem;
    }
  }
</style>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    function showMail(type) {
      const mailElement = document.getElementById(type);
      mailElement.classList.toggle("hidden");
    }

    document
      .getElementById("bookingBtn")
      .addEventListener("click", () => showMail("bookingMail"));
    document
      .getElementById("contactBtn")
      .addEventListener("click", () => showMail("contactMail"));
  });
</script>
